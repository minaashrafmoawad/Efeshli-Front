<div class="container">
  <div class="form-section">
    <div class="form-wrapper">
      <!-- Success State (replaces form when email is sent) -->
      <div *ngIf="successMessage" class="success-state">
        <div class="success-icon">âœ“</div>
        <p class="success-message">We have e-mailed your password reset link!</p>
        <div class="links">
          <a routerLink="/login">Back to Login</a>
          <a routerLink="/signup">Create Account</a>
        </div>
      </div>

      <!-- Form State (shown by default) -->
      <div *ngIf="!successMessage">
        <h4>Forgot Password</h4>
        
        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" novalidate>
          <label for="email">Email Address</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            [ngClass]="{ 'error-border': (submitted && f['email'].invalid) || emailNotFound}"
            [class.error]="(submitted && f['email'].invalid) || emailNotFound"
            placeholder="Enter your email address"
            aria-describedby="emailError"
            [attr.aria-invalid]="(submitted && f['email'].invalid) || emailNotFound"
          />

          <!-- Validation Messages -->
          <div *ngIf="submitted && f['email'].errors" class="error-message" id="emailError">
            <div *ngIf="f['email'].errors['required'] ">Required</div>
            <div *ngIf="f['email'].errors['email']">Invalid Email</div>
          </div>
          
          <!-- API Error Message -->
          <div *ngIf="emailNotFound && !successMessage" class="error-message" id="apiError">
            Sorry, we can't find a user with that email address.
          </div>

          <button type="submit" [disabled]="loading">
            <span *ngIf="!loading">Submit</span>
            <span *ngIf="loading">Processing...</span>
          </button>
        </form>

        <div class="links" *ngIf="!successMessage">
          <a routerLink="/login">Login?</a>
          <a routerLink="/signup">Create Account?</a>
        </div>
      </div>
    </div>
  </div>

  <div class="image-section" aria-hidden="true"></div>
</div>